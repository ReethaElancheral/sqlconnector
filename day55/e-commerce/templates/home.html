{% extends "base.html" %}
{% block title %}Home - Flask Shop{% endblock %}
{% block content %}
  <section class="hero">
    <h1>Welcome to Flask Shop</h1>
    <p>Simple demo e‑commerce built with Flask.</p>
    <a class="btn" href="{{ url_for('main.products') }}">Browse Products</a>
  </section>

  <h2>Latest Products</h2>
  <div class="grid">
    {% for p in products %}
      <div class="card">
        {% if p.image_url %}<img src="{{ p.image_url }}" alt="{{ p.name }}">{% endif %}
        <h3>{{ p.name }}</h3>
        <p class="price">${{ '%.2f' % (p.price_cents / 100.0) }}</p>
        <p class="desc">{{ (p.description or '')[:120] }}{% if (p.description or '')|length > 120 %}…{% endif %}</p>
        {% if current_user.is_authenticated %}
          <button class="btn add-to-cart" data-product-id="{{ p.id }}">Add to Cart</button>
        {% else %}
          <a class="btn" href="{{ url_for('auth.login') }}">Login to Buy</a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endblock %}
